<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.rakuten.PenguinSoldiers.entity">

    <class name="User" table="user">
        <id name="id" column="user_id">
            <generator class="increment"/>
        </id>
        <property name="employeeId" column="employee_id" unique="true"/>
        <property name="email"/>
        <property name="name"/>
        <property name="username"/>
        <property name="password"/>
        <property name="role"/>
        <property name="createdTimestamp" column="created_timestamp"/>
        
        <set name="members" cascade="none" table="hierarchy"  lazy="false"  >
          <key column="high_id" />
          <many-to-many column="low_id" class="User"/>
        </set>
        
        <set name="managers" cascade="none" table="hierarchy" lazy="false"  >
          <key column="low_id" />
          <many-to-many column="high_id" class="User"/>
        </set>
        
        <!--
        <many-to-one name="manager" class="User" fetch="join"  column="manager_id" lazy="false" cascade="all" />
         -->
          <!-- 
        <set name="members" cascade="all" fetch="join" inverse="true" lazy="false" sort="unsorted" >
          <key column="manager_id" not-null="true"/>
          <one-to-many class="User"/>
        </set>
         
          
        <list name="members" cascade="all" lazy="false">  
          <key column="manager_id"></key>  
          <index column="memebr_index_id"></index>  
          <one-to-many class="User"/>  
        </list>
         -->
           
    </class>

</hibernate-mapping>